{% extends "base.html" %}
{% block title %}{{ post.title }} - Blog{% endblock %}

{# ===== CABECERA DEL POST (imagen + título + tags + fecha) ===== #}
{% block hero %}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-xl-10">

      {% if post.main_image %}
      <div class="post-hero-image-wrapper fade-up">
        <img src="{{ post.main_image.url }}"
             alt="{{ post.title }}"
             class="post-hero-image">
      </div>
      {% endif %}

      <div class="mt-4 fade-up" style="animation-delay: 80ms;">
        {% if post.tags.all %}
        <div class="mb-2 d-flex flex-wrap gap-2">
          {% for tag in post.tags.all %}
          <span class="tag-pill tag-pill-sm">{{ tag.name }}</span>
          {% endfor %}
        </div>
        {% endif %}

        <h1 class="post-title mb-2">
          {{ post.title }}
        </h1>

        <p class="blog-meta mb-0">
          Publicado el {{ post.published_at|date:"d/m/Y H:i" }}
        </p>
      </div>

    </div>
  </div>
</div>
{% endblock %}

{# ===== CUERPO DEL POST + RELACIONADOS ===== #}
{% block content %}
<div class="container pb-5">
  <div class="row justify-content-center">
    <div class="col-xl-10">

      {# Zona de lectura limpia, sin card alrededor #}
      <article class="post-reading-area fade-up">
        <div class="post-content">
          {{ post.content|linebreaks }}
        </div>
      </article>

      {% if related_posts %}
      <section class="mt-5 fade-up" style="animation-delay: 120ms;">
        <h3 class="h5 mb-3"><u>Artículos relacionados</u></h3>
        <hr>
        <div class="row g-4">
          {% for item in related_posts %}
          <div class="col-md-4">
            <article class="card-glow blog-card h-100">

              {% if item.main_image %}
              <div class="blog-card-image-wrapper mb-2">
                <img src="{{ item.main_image.url }}"
                     class="blog-card-image"
                     alt="{{ item.title }}">
              </div>
              {% endif %}

              <h4 class="h6 text-accent mb-1">{{ item.title }}</h4>

              <a href="{% url 'blog_detail' item.slug %}" class="blog-card-link">
                Leer artículo →
              </a>
            </article>
          </div>
          {% endfor %}
        </div>
      </section>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
